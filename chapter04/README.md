## 4장 React 컴포넌트의 상태 객체
```
  - React 컴포넌트의 상태 객체에 대한 이해
  - 상태 객체를 다루는 방법
  - 상태 객체와 속성(props)의 비교
  - 상태저장 컴포넌트와 상태비저장 컴포넌트

  상태 객체가 없다면 리액트 컴포넌트는 그저 빚 좋은 정적 템플릿일 뿐이다. 
  이 장만큼 중요한 장은 없다.

  리액트의 상태 관리는 단방향을 기준으로 부모에서 자식으로 내려줄때 속성을 통해서 뷰를 관리한다.

  속성은 현재 컴포넌트에서 변경할 수 없으므로 부모 컴포넌트에서 컴포넌트를 새로 생성해서 새로운 값을 전달하는 방법 외에는 컴포넌트의 속성을 변경할 수 없다.
  (리덕스 등을 통해 다이렉트로 하위 컴포넌트에서 관리 할수도 있으나 컨테이너를 통해 관리해야 할지는 신중하게 결정해야 한다.)

  cf: p121 그림 4-2 뷰를 변경하기 위해서는 컴포넌트 내부에 변경할 수 있는 다른 자료형이 필요하다.
  A 컴포넌트(부모)                            B 컴포넌트(하위)                          뷰: render()       
                            ->              이벤트 발생(상태 변경)         ->

  한 가지 해결책은 서버에서 응답을 받을 때마다 새로운 속성으로 엘리먼트를 렌더링 하는 것이다.
  그렇지만 이 경우 관련된 로직을 컴포넌트 외부에 작성해야 하므로 독립적인 컴포넌트가 될 수 없다.
  만약 속성 값을 변경할 수 없지만 컴포넌트는 독립적이어야 한다면 속성을 사용할 수 없을 것이다.
  따라서 문제를 정리해보면, createElement()나 JSX <NAME/>을 이용해 컴포넌트를 다시 생성하지 않고,
  사용자 조작으로 발생한 이벤트를 처리하여 뷰를 갱신해야 한다.
  즉 상태 객체를 이요하면 이런 문제를 해결할 수 있다.

  서버 응답에 따라 콜백 코드가 컴포넌트의 상태를 변경한다. 상태를 갱신하고 나면 React가 영리하게 뷰를 갱신한다.
  (변경된 상태 데이터를 이용하고 있는 부분만 갱신한다.)

  React 컴포넌트의 상태 객체를 이용하면 가치 있고 상호작용이 뛰어난 React 애플리케이션을 만들 수 있다.
  상태(state)는 React 컴포넌트 데이터를 저장하고, 데이터의 변경에 따라 자동으로 뷰를 갱신하도록 하는 핵심 개념이다.
```

### 4.1 React 컴포넌트의 상태란?
```
  React의 상태는 컴포넌트의 변경 가능한 데이터 저장소다.
  독립적이면서 기능 중심인 UI와 논리의 블록이다.
  변경 가능하다는 것은 상태 값을 변경할 수 있다는 것이다.
  뷰(render())에서 상태를 이용하고, 이 값을 나중에 변경하면 뷰의 표현에 영향을 줄 수 있다.

  빗대어 설명하면 이렇다. 컴포넌트를 속성과 상태가 있는 함수라고 생각하면 이 함수의 결과가 UI 표현(뷰)이다.
  React 팀에서는 "컴포넌트는 상태머신 입니다."라고 말하고 있다.
  속성과 상태는 둘 다 뷰를 갱신하기 위해 사용할 수 있지만, 서로 다른 목적으로 사용한다.

  상태 객체에 접근할 때는 이름을 이용한다. 이름은 this.state 객체의 속성이다. 
  (여기서 말하는 객체 속성이란 객체 키 또는 객체 프로퍼티를 의미하며, 컴포넌트의 속성이 아니다.)
  예를 들면 this.state.autoompleMatcches 또는 this.state.inputFieldValue 같은 방식이다.

  Note: 일반적으로 상태 객체라고 하면 컴포넌트의 this.state 객체에 속한 모든 키-값 쌍을 말한다. 
        상태라고 하면 문맥에 따라서 this.state 객체를 의미하거나 this.state.inputFieldValue처럼
        개별 상태 값을 의미할 수도 있다. 
        반면에 상태 객체라고 하면 거의 항상 하나의 컴포넌트에 속한 상태 객체를 구성하는 여러 개의 키-값 쌍을 의미한다.

  상태 데이터는 흔히 뷰의 렌더링이 갱신될 때 동적 정보를 출력하기 위해 사용된다.
  사용자 입력을 받아 서버에 XHR 요청을 보내고, 돌아온 응답에 따라 상태를 변경한다.
  React는 뷰에 출력된 상태가 변경되면, 변경된 상태를 뷰에 반영하여 뷰를 최신 상태로 유지한다.
  본질적으로 상태를 변경하면 뷰에서 변경한 상태에 관련된 부분만 갱신 된다.(작게는 HTML 요소 또는 한 요소의 속성만 변경된다.)

  DOM에 있는 그 외의 다른 부분은 그대로 유지한다. 
  이것은 가상 DOM 덕분인데, 이는 React가 보정(reconciliation) 과정을 통해 변경할 부분을 결정하는 방식이다.
  이 덕분에 선언적으로 작성할 수 있는 것이다. 우리는 React가 부리는 리렌더링을 감상하면 된다.
  (개발자가 뷰를 따로 관리할 필요가 없다.)

  React 개발자는 상태 객체를 이용해서 새로운 UI를 생성한다. 
  컴포넌트 속성(this.props)이나, 일반적인 변수(inputValue), 클래스 속성(this.inputValue)으로는 처리할 수 없는데,
  이것들을 컴포넌트 내부에서 변경하더라도 뷰를 자동으로 변경할 수 없기 때문이다.

  다음예제는 안티패턴으로, 상태 외의 다른 값을 변경해도 뷰를 갱신할 수 없다는 것을 보여준다.
  // 안티패턴: 이런 방식은 피해야 한다
  let inputValue = 'Texas'
  class Autocomplete extends React.component {
    updateValues() {
      this.props.inputValue = 'California'
      inputValue = 'California'
      this.inputValue = 'California'
    }
    render() {
      return (
        <div>
          {this.props.inputValue}
          {inputValue}
          {this.inputValue}
        </div>
      )
    }
  }

  Note: 속성은 부모 컴포넌트에서 새로운 값을 전달하면 뷰를 갱신하여 현재 다루고 있는 자식 컴포넌트의 새로운 인스턴스를 생성한다.
        해당 자식 컴포넌트 컨텍스트 내에서 this.props.inputValue = 'California' 같은 방식으로 속성을 변경하려고 해도 소용 없다.
```

### 상태 객체 다루기
```
  상태 객체를 다루려면 값이 접근하고 갱신하는 방법과 초기 상태 설정 방법을 알아야 한다.
  React 컴포넌트의 상태 객체에 접근하는 방법부터 알아보자.
```

#### 상태 객체에 접근하기
```javascript
  /*
  상태 객체는 컴포넌트의 멤버 변수로 this를 통해 접근할 수 있다.
  this.state.name 같은 방식으로 접근한다.
  JSX에서 중괄호({})를 이용해 변수에 접근하고 출력할 수 있다.
  이와 유사하게 render()에서 this.state를 렌더링 할 수 있다.
  (다른 변수나 컴포넌트 클래스에 선언한 클래스 속성과 다르지 않다.)
  예를 들면 {this.state.inputFieldValue}처럼 작성할 수 있다.
  이 문법은 속성에 접근하는 방법인 this.props.name과 비슷하다.

  지금까지 배운 내용으로 시계를 구현해보자
  folder structure
    /clock
      index.html
      /jsx
        script.jsx
        clock.jsx
      /js
        script.js
        clock.js
        react.js
        react-dom.js
  */
```